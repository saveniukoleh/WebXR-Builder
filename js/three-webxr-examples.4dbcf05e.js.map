{"version":3,"file":"js/three-webxr-examples.4dbcf05e.js","mappings":"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","sources":["webpack://webxr-builder/./src/views/ThreeWebXRExamples.vue","webpack://webxr-builder/./node_modules/three/examples/jsm/geometries/BoxLineGeometry.js","webpack://webxr-builder/./node_modules/three/examples/jsm/webxr/XRButton.js","webpack://webxr-builder/./src/views/ThreeWebXRExamples.vue?2733"],"sourcesContent":["<template>\n  <div class=\"three-demo-1\">\n    <h1>Three.js WebXR examples</h1>\n    <div id=\"xr-renderer-wrapper\"></div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from 'three'\n\nimport { BoxLineGeometry } from 'three/addons/geometries/BoxLineGeometry.js'\nimport { XRButton } from 'three/addons/webxr/XRButton.js'\nimport { XRControllerModelFactory } from 'three/addons/webxr/XRControllerModelFactory.js'\n\nexport default {\n  mounted() {\n    const clock = new THREE.Clock()\n\n    let camera, scene, raycaster, renderer\n\n    let room\n\n    let controller, controllerGrip\n    let INTERSECTED\n\n    init()\n    animate()\n\n    function init() {\n      const rendererWrapper = document.getElementById('xr-renderer-wrapper')\n\n      scene = new THREE.Scene()\n      scene.background = new THREE.Color(0x505050)\n\n      camera = new THREE.PerspectiveCamera(\n        50,\n        window.innerWidth / window.innerHeight,\n        0.1,\n        10\n      )\n      camera.position.set(0, 1.6, 3)\n      scene.add(camera)\n\n      room = new THREE.LineSegments(\n        new BoxLineGeometry(6, 6, 6, 10, 10, 10).translate(0, 3, 0),\n        new THREE.LineBasicMaterial({ color: 0xbcbcbc })\n      )\n      scene.add(room)\n\n      scene.add(new THREE.HemisphereLight(0xa5a5a5, 0x898989, 3))\n\n      const light = new THREE.DirectionalLight(0xffffff, 3)\n      light.position.set(1, 1, 1).normalize()\n      scene.add(light)\n\n      const geometry = new THREE.BoxGeometry(0.15, 0.15, 0.15)\n\n      for (let i = 0; i < 200; i++) {\n        const object = new THREE.Mesh(\n          geometry,\n          new THREE.MeshLambertMaterial({ color: Math.random() * 0xffffff })\n        )\n\n        object.position.x = Math.random() * 4 - 2\n        object.position.y = Math.random() * 4\n        object.position.z = Math.random() * 4 - 2\n\n        object.rotation.x = Math.random() * 2 * Math.PI\n        object.rotation.y = Math.random() * 2 * Math.PI\n        object.rotation.z = Math.random() * 2 * Math.PI\n\n        object.scale.x = Math.random() + 0.5\n        object.scale.y = Math.random() + 0.5\n        object.scale.z = Math.random() + 0.5\n\n        object.userData.velocity = new THREE.Vector3()\n        object.userData.velocity.x = Math.random() * 0.01 - 0.005\n        object.userData.velocity.y = Math.random() * 0.01 - 0.005\n        object.userData.velocity.z = Math.random() * 0.01 - 0.005\n\n        room.add(object)\n      }\n\n      raycaster = new THREE.Raycaster()\n\n      renderer = new THREE.WebGLRenderer({ antialias: true })\n      renderer.setPixelRatio(window.devicePixelRatio)\n      renderer.setSize(window.innerWidth, window.innerHeight)\n      renderer.xr.enabled = true\n      rendererWrapper.appendChild(renderer.domElement)\n\n      //\n\n      function onSelectStart() {\n        this.userData.isSelecting = true\n      }\n\n      function onSelectEnd() {\n        this.userData.isSelecting = false\n      }\n\n      controller = renderer.xr.getController(0)\n      controller.addEventListener('selectstart', onSelectStart)\n      controller.addEventListener('selectend', onSelectEnd)\n      controller.addEventListener('connected', function (event) {\n        this.add(buildController(event.data))\n      })\n      controller.addEventListener('disconnected', function () {\n        this.remove(this.children[0])\n      })\n      scene.add(controller)\n\n      const controllerModelFactory = new XRControllerModelFactory()\n\n      controllerGrip = renderer.xr.getControllerGrip(0)\n      controllerGrip.add(\n        controllerModelFactory.createControllerModel(controllerGrip)\n      )\n      scene.add(controllerGrip)\n\n      window.addEventListener('resize', onWindowResize)\n\n      //\n\n      document.body.appendChild(\n        XRButton.createButton(renderer, { optionalFeatures: ['depth-sensing'] })\n      )\n    }\n\n    function buildController(data) {\n      let geometry, material\n\n      switch (data.targetRayMode) {\n        case 'tracked-pointer':\n          geometry = new THREE.BufferGeometry()\n          geometry.setAttribute(\n            'position',\n            new THREE.Float32BufferAttribute([0, 0, 0, 0, 0, -1], 3)\n          )\n          geometry.setAttribute(\n            'color',\n            new THREE.Float32BufferAttribute([0.5, 0.5, 0.5, 0, 0, 0], 3)\n          )\n\n          material = new THREE.LineBasicMaterial({\n            vertexColors: true,\n            blending: THREE.AdditiveBlending\n          })\n\n          return new THREE.Line(geometry, material)\n\n        case 'gaze':\n          geometry = new THREE.RingGeometry(0.02, 0.04, 32).translate(0, 0, -1)\n          material = new THREE.MeshBasicMaterial({\n            opacity: 0.5,\n            transparent: true\n          })\n          return new THREE.Mesh(geometry, material)\n      }\n    }\n\n    function onWindowResize() {\n      camera.aspect = window.innerWidth / window.innerHeight\n      camera.updateProjectionMatrix()\n\n      renderer.setSize(window.innerWidth, window.innerHeight)\n    }\n\n    //\n\n    function animate() {\n      renderer.setAnimationLoop(render)\n    }\n\n    function render() {\n      const delta = clock.getDelta() * 60\n\n      if (controller.userData.isSelecting === true) {\n        const cube = room.children[0]\n        room.remove(cube)\n\n        cube.position.copy(controller.position)\n        cube.userData.velocity.x = (Math.random() - 0.5) * 0.02 * delta\n        cube.userData.velocity.y = (Math.random() - 0.5) * 0.02 * delta\n        cube.userData.velocity.z = (Math.random() * 0.01 - 0.05) * delta\n        cube.userData.velocity.applyQuaternion(controller.quaternion)\n        room.add(cube)\n      }\n\n      // find intersections\n\n      // TODO\n      // raycaster.setFromXRController(controller)\n\n      const intersects = raycaster.intersectObjects(room.children, false)\n\n      if (intersects.length > 0) {\n        if (INTERSECTED != intersects[0].object) {\n          if (INTERSECTED)\n            INTERSECTED.material.emissive.setHex(INTERSECTED.currentHex)\n\n          INTERSECTED = intersects[0].object\n          INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex()\n          INTERSECTED.material.emissive.setHex(0xff0000)\n        }\n      } else {\n        if (INTERSECTED)\n          INTERSECTED.material.emissive.setHex(INTERSECTED.currentHex)\n\n        INTERSECTED = undefined\n      }\n\n      // Keep cubes inside room\n\n      for (let i = 0; i < room.children.length; i++) {\n        const cube = room.children[i]\n\n        cube.userData.velocity.multiplyScalar(1 - 0.001 * delta)\n\n        cube.position.add(cube.userData.velocity)\n\n        if (cube.position.x < -3 || cube.position.x > 3) {\n          cube.position.x = THREE.MathUtils.clamp(cube.position.x, -3, 3)\n          cube.userData.velocity.x = -cube.userData.velocity.x\n        }\n\n        if (cube.position.y < 0 || cube.position.y > 6) {\n          cube.position.y = THREE.MathUtils.clamp(cube.position.y, 0, 6)\n          cube.userData.velocity.y = -cube.userData.velocity.y\n        }\n\n        if (cube.position.z < -3 || cube.position.z > 3) {\n          cube.position.z = THREE.MathUtils.clamp(cube.position.z, -3, 3)\n          cube.userData.velocity.z = -cube.userData.velocity.z\n        }\n\n        cube.rotation.x += cube.userData.velocity.x * 2 * delta\n        cube.rotation.y += cube.userData.velocity.y * 2 * delta\n        cube.rotation.z += cube.userData.velocity.z * 2 * delta\n      }\n\n      renderer.render(scene, camera)\n\n      const onComponentUnmounted = () => {\n        renderer.setAnimationLoop(null)\n        window.removeEventListener('resize', onWindowResize)\n        window.removeEventListener('component-unm÷ounted', onComponentUnmounted)\n        const xrButton = document.getElementById('XRButton')\n        if (xrButton) {\n          document.body.removeChild(xrButton)\n        }\n      }\n\n      // TODO\n      window.addEventListener('component-unmounted', onComponentUnmounted)\n    }\n  },\n  // TODO\n  unmounted() {\n    window.dispatchEvent(new Event('component-unmounted'))\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.renderer-wrapper {\n  border: 5px #2c3e50 solid;\n  height: calc(100% - 256px);\n}\n</style>\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute\n} from 'three';\n\nclass BoxLineGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\tconst widthHalf = width / 2;\n\t\tconst heightHalf = height / 2;\n\t\tconst depthHalf = depth / 2;\n\n\t\tconst segmentWidth = width / widthSegments;\n\t\tconst segmentHeight = height / heightSegments;\n\t\tconst segmentDepth = depth / depthSegments;\n\n\t\tconst vertices = [];\n\n\t\tlet x = - widthHalf;\n\t\tlet y = - heightHalf;\n\t\tlet z = - depthHalf;\n\n\t\tfor ( let i = 0; i <= widthSegments; i ++ ) {\n\n\t\t\tvertices.push( x, - heightHalf, - depthHalf, x, heightHalf, - depthHalf );\n\t\t\tvertices.push( x, heightHalf, - depthHalf, x, heightHalf, depthHalf );\n\t\t\tvertices.push( x, heightHalf, depthHalf, x, - heightHalf, depthHalf );\n\t\t\tvertices.push( x, - heightHalf, depthHalf, x, - heightHalf, - depthHalf );\n\n\t\t\tx += segmentWidth;\n\n\t\t}\n\n\t\tfor ( let i = 0; i <= heightSegments; i ++ ) {\n\n\t\t\tvertices.push( - widthHalf, y, - depthHalf, widthHalf, y, - depthHalf );\n\t\t\tvertices.push( widthHalf, y, - depthHalf, widthHalf, y, depthHalf );\n\t\t\tvertices.push( widthHalf, y, depthHalf, - widthHalf, y, depthHalf );\n\t\t\tvertices.push( - widthHalf, y, depthHalf, - widthHalf, y, - depthHalf );\n\n\t\t\ty += segmentHeight;\n\n\t\t}\n\n\t\tfor ( let i = 0; i <= depthSegments; i ++ ) {\n\n\t\t\tvertices.push( - widthHalf, - heightHalf, z, - widthHalf, heightHalf, z );\n\t\t\tvertices.push( - widthHalf, heightHalf, z, widthHalf, heightHalf, z );\n\t\t\tvertices.push( widthHalf, heightHalf, z, widthHalf, - heightHalf, z );\n\t\t\tvertices.push( widthHalf, - heightHalf, z, - widthHalf, - heightHalf, z );\n\n\t\t\tz += segmentDepth;\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t}\n\n}\n\nexport { BoxLineGeometry };\n","class XRButton {\n\n\tstatic createButton( renderer, sessionInit = {} ) {\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showStartXR( mode ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\n\t\t\t\tbutton.textContent = 'STOP XR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'START XR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'START XR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\tconst sessionOptions = {\n\t\t\t\t\t\t...sessionInit,\n\t\t\t\t\t\toptionalFeatures: [\n\t\t\t\t\t\t\t'local-floor',\n\t\t\t\t\t\t\t'bounded-floor',\n\t\t\t\t\t\t\t'hand-tracking',\n\t\t\t\t\t\t\t'layers',\n\t\t\t\t\t\t\t...( sessionInit.optionalFeatures || [] )\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\n\t\t\t\t\tnavigator.xr.requestSession( mode, sessionOptions )\n\t\t\t\t\t\t.then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showXRNotSupported() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'XR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction showXRNotAllowed( exception ) {\n\n\t\t\tdisableButton();\n\n\t\t\tconsole.warn( 'Exception when trying to call xr.isSessionSupported', exception );\n\n\t\t\tbutton.textContent = 'XR NOT ALLOWED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'XRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-ar' )\n\t\t\t\t.then( function ( supported ) {\n\n\t\t\t\t\tif ( supported ) {\n\n\t\t\t\t\t\tshowStartXR( 'immersive-ar' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' )\n\t\t\t\t\t\t\t.then( function ( supported ) {\n\n\t\t\t\t\t\t\t\tif ( supported ) {\n\n\t\t\t\t\t\t\t\t\tshowStartXR( 'immersive-vr' );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tshowXRNotSupported();\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} ).catch( showXRNotAllowed );\n\n\t\t\t\t\t}\n\n\t\t\t\t} ).catch( showXRNotAllowed );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { XRButton };\n","import { render } from \"./ThreeWebXRExamples.vue?vue&type=template&id=648eabf6\"\nimport script from \"./ThreeWebXRExamples.vue?vue&type=script&lang=js\"\nexport * from \"./ThreeWebXRExamples.vue?vue&type=script&lang=js\"\n\nimport \"./ThreeWebXRExamples.vue?vue&type=style&index=0&id=648eabf6&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","_hoisted_2","_hoisted_3","_createElementBlock","_hoisted_1","_hoisted_4","BoxLineGeometry","BufferGeometry","constructor","width","height","depth","widthSegments","heightSegments","depthSegments","super","Math","floor","widthHalf","heightHalf","depthHalf","segmentWidth","segmentHeight","segmentDepth","vertices","x","y","z","i","push","this","setAttribute","Float32BufferAttribute","XRButton","createButton","renderer","sessionInit","button","document","createElement","showStartXR","mode","currentSession","async","onSessionStarted","session","addEventListener","onSessionEnded","xr","setSession","textContent","removeEventListener","style","display","cursor","left","onmouseenter","opacity","onmouseleave","onclick","sessionOptions","optionalFeatures","navigator","requestSession","then","end","disableButton","showXRNotSupported","showXRNotAllowed","exception","console","warn","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","outline","zIndex","isSessionSupported","supported","catch","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration","mounted","clock","THREE","camera","scene","raycaster","room","controller","controllerGrip","INTERSECTED","init","rendererWrapper","getElementById","innerWidth","innerHeight","set","add","translate","light","normalize","geometry","object","random","rotation","PI","scale","userData","velocity","onSelectStart","isSelecting","onSelectEnd","antialias","setPixelRatio","devicePixelRatio","setSize","enabled","appendChild","domElement","getController","event","buildController","data","remove","children","controllerModelFactory","XRControllerModelFactory","getControllerGrip","createControllerModel","onWindowResize","body","material","targetRayMode","vertexColors","blending","transparent","aspect","updateProjectionMatrix","animate","setAnimationLoop","render","delta","getDelta","cube","copy","applyQuaternion","quaternion","intersects","intersectObjects","length","emissive","setHex","currentHex","getHex","undefined","multiplyScalar","clamp","onComponentUnmounted","xrButton","removeChild","unmounted","dispatchEvent","Event","__exports__"],"sourceRoot":""}