{"version":3,"file":"js/three-demo-1.6c7188c7.js","mappings":"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","sources":["webpack://webxr-builder/./src/views/ThreeDemoPlaneView.vue","webpack://webxr-builder/./src/views/ThreeDemoPlaneView.vue?b80b"],"sourcesContent":["<template>\r\n  <div class=\"three-demo-1\">\r\n    <h1>This is a Three.js Demo 1 page</h1>\r\n    <div class=\"renderer-wrapper\">\r\n      <Renderer\r\n        ref=\"renderer\"\r\n        antialias\r\n        orbit-ctrl\r\n        resize\r\n        shadow\r\n        @click=\"randomColors\"\r\n      >\r\n        <Camera :position=\"{ z: 7 }\" />\r\n        <Scene background=\"white\">\r\n          <AmbientLight color=\"#ffffff\" />\r\n          <SpotLight\r\n            color=\"#ffffff\"\r\n            :intensity=\"5\"\r\n            :position=\"{ x: 0, y: 1, z: 2 }\"\r\n            :angle=\"Math.PI / 3\"\r\n            :penumbra=\"0.5\"\r\n            cast-shadow\r\n            :shadow-map-size=\"{ width: 1024, height: 1024 }\"\r\n          />\r\n          <SpotLight\r\n            color=\"#ff0000\"\r\n            :intensity=\"5\"\r\n            :position=\"{ x: 0, y: -1, z: 2 }\"\r\n            :angle=\"Math.PI / 3\"\r\n            :penumbra=\"0.5\"\r\n            cast-shadow\r\n            :shadow-map-size=\"{ width: 1024, height: 1024 }\"\r\n          />\r\n          <Plane\r\n            :width=\"15\"\r\n            :height=\"15\"\r\n            :position=\"{ z: -0.1 }\"\r\n            receive-shadow\r\n          >\r\n            <PhongMaterial color=\"#aaaaaa\" />\r\n          </Plane>\r\n          <CannonWorld\r\n            :gravity=\"{ x: 0, y: -9.82, z: 0 }\"\r\n            @before-step=\"onBeforeStep\"\r\n          >\r\n            <InstancedMesh\r\n              ref=\"imeshC\"\r\n              :count=\"COUNT\"\r\n              @created=\"initIMesh\"\r\n              cast-shadow\r\n            >\r\n              <SphereGeometry\r\n                :radius=\"0.1\"\r\n                :width-segments=\"16\"\r\n                :height-segments=\"16\"\r\n              />\r\n              <ToonMaterial />\r\n            </InstancedMesh>\r\n            <Box\r\n              v-for=\"i in 6\"\r\n              :key=\"`box-${i}`\"\r\n              :width=\"3\"\r\n              :height=\"0.05\"\r\n              :depth=\"0.2\"\r\n              :position=\"{\r\n                x: (i % 2 === 0 ? 1 : -1) * 1,\r\n                y: (i - 3.5) * 1.5,\r\n                z: 0\r\n              }\"\r\n              :rotation=\"{ z: ((i % 2 === 0 ? 1 : -1) * Math.PI) / 6 }\"\r\n              cast-shadow\r\n            >\r\n              <PhongMaterial color=\"#aaaaaa\" />\r\n            </Box>\r\n          </CannonWorld>\r\n        </Scene>\r\n      </Renderer>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Color, MathUtils, Object3D } from 'three'\r\nimport {\r\n  AmbientLight,\r\n  Box,\r\n  Camera,\r\n  InstancedMesh,\r\n  PhongMaterial,\r\n  Plane,\r\n  Renderer,\r\n  Scene,\r\n  SphereGeometry,\r\n  SpotLight,\r\n  ToonMaterial\r\n} from 'troisjs'\r\nimport CannonWorld from 'troisjs/src/components/physics/CannonWorld.js'\r\nimport niceColors from 'nice-color-palettes'\r\n\r\nconst { randFloat: rnd, randFloatSpread: rndFS } = MathUtils\r\n\r\nexport default {\r\n  components: {\r\n    AmbientLight,\r\n    Box,\r\n    Camera,\r\n    InstancedMesh,\r\n    PhongMaterial,\r\n    Plane,\r\n    Renderer,\r\n    Scene,\r\n    SphereGeometry,\r\n    SpotLight,\r\n    ToonMaterial,\r\n    CannonWorld\r\n  },\r\n  setup() {\r\n    return {\r\n      COUNT: 500\r\n    }\r\n  },\r\n  methods: {\r\n    initIMesh(imesh) {\r\n      this.imesh = imesh\r\n\r\n      const dummy = new Object3D()\r\n      const color = new Color()\r\n      // const cscale = chroma.scale(niceColors[Math.floor(rnd(0, 100))]);\r\n      const scales = new Array(this.COUNT)\r\n      const masses = new Array(this.COUNT)\r\n      const colors = new Array(this.COUNT)\r\n        .fill()\r\n        .map(() => niceColors[20][Math.floor(rnd(0, 5))])\r\n\r\n      for (let i = 0; i < this.COUNT; i++) {\r\n        dummy.position.set(rndFS(2), rndFS(5), 0)\r\n        const scale = rnd(0.2, 1)\r\n        scales[i] = scale\r\n        masses[i] = scale * 0.01\r\n        dummy.scale.set(scale, scale, scale)\r\n        dummy.updateMatrix()\r\n        imesh.setMatrixAt(i, dummy.matrix)\r\n        imesh.setColorAt(i, color.set(colors[i]))\r\n        // imesh.setColorAt(i, color.set(cscale(rnd(0, 1)).hex()));\r\n      }\r\n      imesh.instanceMatrix.needsUpdate = true\r\n      imesh.userData.scales = scales\r\n      imesh.userData.masses = masses\r\n      imesh.userData.damping = 0.7\r\n    },\r\n    onBeforeStep() {\r\n      this.imesh.userData.bodies.forEach((body) => {\r\n        if (body.position.y < -7) {\r\n          body.position.set(rndFS(2), rnd(5, 7), 0)\r\n          body.angularVelocity.set(0, 0, 0, 0)\r\n          body.velocity.set(0, 0, 0)\r\n          body.quaternion.set(0, 0, 0, 1)\r\n        }\r\n      })\r\n    },\r\n    randomColors() {\r\n      const ci = Math.floor(rnd(0, 100))\r\n      const color = new Color()\r\n      const colors = new Array(this.COUNT)\r\n        .fill()\r\n        .map(() => niceColors[ci][Math.floor(rnd(0, 5))])\r\n      for (let i = 0; i < this.COUNT; i++) {\r\n        this.imesh.setColorAt(i, color.set(colors[i]))\r\n      }\r\n      this.imesh.instanceColor.needsUpdate = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.three-demo-1 {\r\n  height: calc(100% - 168px);\r\n}\r\n\r\n.renderer-wrapper {\r\n  border: 5px #2c3e50 solid;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./ThreeDemoPlaneView.vue?vue&type=template&id=895a7ebe\"\nimport script from \"./ThreeDemoPlaneView.vue?vue&type=script&lang=js\"\nexport * from \"./ThreeDemoPlaneView.vue?vue&type=script&lang=js\"\n\nimport \"./ThreeDemoPlaneView.vue?vue&type=style&index=0&id=895a7ebe&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_Renderer","ref","antialias","resize","shadow","onClick","$options","randomColors","_component_Camera","position","z","_component_Scene","background","_component_AmbientLight","color","_component_SpotLight","intensity","x","y","angle","Math","PI","penumbra","width","height","_component_Plane","_component_PhongMaterial","_component_CannonWorld","gravity","onBeforeStep","_component_InstancedMesh","count","$setup","COUNT","onCreated","initIMesh","_component_SphereGeometry","radius","_component_ToonMaterial","_Fragment","_renderList","i","_component_Box","key","depth","rotation","randFloat","rnd","randFloatSpread","rndFS","MathUtils","components","AmbientLight","Box","Camera","InstancedMesh","PhongMaterial","Plane","Renderer","Scene","SphereGeometry","SpotLight","ToonMaterial","CannonWorld","setup","methods","imesh","this","dummy","Object3D","Color","scales","Array","masses","colors","fill","map","niceColors","floor","set","scale","updateMatrix","setMatrixAt","matrix","setColorAt","instanceMatrix","needsUpdate","userData","damping","bodies","forEach","body","angularVelocity","velocity","quaternion","ci","instanceColor","__exports__","render"],"sourceRoot":""}