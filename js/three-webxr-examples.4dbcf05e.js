"use strict";(self["webpackChunkwebxr_builder"]=self["webpackChunkwebxr_builder"]||[]).push([[476],{6349:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var o=n(3396);const i={class:"three-demo-1"},a=(0,o._)("h1",null,"Three.js WebXR examples",-1),r=(0,o._)("div",{id:"xr-renderer-wrapper"},null,-1),s=[a,r];function l(e,t,n,a,r,l){return(0,o.wg)(),(0,o.iD)("div",i,s)}var c=n(1114);n(560);class d extends c.u9r{constructor(e=1,t=1,n=1,o=1,i=1,a=1){super(),o=Math.floor(o),i=Math.floor(i),a=Math.floor(a);const r=e/2,s=t/2,l=n/2,d=e/o,u=t/i,p=n/a,h=[];let m=-r,y=-s,w=-l;for(let c=0;c<=o;c++)h.push(m,-s,-l,m,s,-l),h.push(m,s,-l,m,s,l),h.push(m,s,l,m,-s,l),h.push(m,-s,l,m,-s,-l),m+=d;for(let c=0;c<=i;c++)h.push(-r,y,-l,r,y,-l),h.push(r,y,-l,r,y,l),h.push(r,y,l,-r,y,l),h.push(-r,y,l,-r,y,-l),y+=u;for(let c=0;c<=a;c++)h.push(-r,-s,w,-r,s,w),h.push(-r,s,w,r,s,w),h.push(r,s,w,r,-s,w),h.push(r,-s,w,-r,-s,w),w+=p;this.setAttribute("position",new c.a$l(h,3))}}class u{static createButton(e,t={}){const n=document.createElement("button");function o(o){let i=null;async function a(t){t.addEventListener("end",r),await e.xr.setSession(t),n.textContent="STOP XR",i=t}function r(){i.removeEventListener("end",r),n.textContent="START XR",i=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="START XR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===i){const e={...t,optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers",...t.optionalFeatures||[]]};navigator.xr.requestSession(o,e).then(a)}else i.end()}}function i(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function a(){i(),n.textContent="XR NOT SUPPORTED"}function r(e){i(),console.warn("Exception when trying to call xr.isSessionSupported",e),n.textContent="XR NOT ALLOWED"}function s(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="XRButton",n.style.display="none",s(n),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?o("immersive-ar"):navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?o("immersive-vr"):a()})).catch(r)})).catch(r),n;{const e=document.createElement("a");return!1===window.isSecureContext?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",s(e),e}}}var p=n(7061),h={mounted(){const e=new c.SUY;let t,n,o,i,a,r,s,l;function h(){const e=document.getElementById("xr-renderer-wrapper");n=new c.xsS,n.background=new c.Ilk(5263440),t=new c.cPb(50,window.innerWidth/window.innerHeight,.1,10),t.position.set(0,1.6,3),n.add(t),a=new c.ejS(new d(6,6,6,10,10,10).translate(0,3,0),new c.nls({color:12369084})),n.add(a),n.add(new c.vmT(10855845,9013641,3));const l=new c.Ox3(16777215,3);l.position.set(1,1,1).normalize(),n.add(l);const h=new c.DvJ(.15,.15,.15);for(let t=0;t<200;t++){const e=new c.Kj0(h,new c.YBo({color:16777215*Math.random()}));e.position.x=4*Math.random()-2,e.position.y=4*Math.random(),e.position.z=4*Math.random()-2,e.rotation.x=2*Math.random()*Math.PI,e.rotation.y=2*Math.random()*Math.PI,e.rotation.z=2*Math.random()*Math.PI,e.scale.x=Math.random()+.5,e.scale.y=Math.random()+.5,e.scale.z=Math.random()+.5,e.userData.velocity=new c.Pa4,e.userData.velocity.x=.01*Math.random()-.005,e.userData.velocity.y=.01*Math.random()-.005,e.userData.velocity.z=.01*Math.random()-.005,a.add(e)}function w(){this.userData.isSelecting=!0}function v(){this.userData.isSelecting=!1}o=new c.iMs,i=new c.CP7({antialias:!0}),i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),i.xr.enabled=!0,e.appendChild(i.domElement),r=i.xr.getController(0),r.addEventListener("selectstart",w),r.addEventListener("selectend",v),r.addEventListener("connected",(function(e){this.add(m(e.data))})),r.addEventListener("disconnected",(function(){this.remove(this.children[0])})),n.add(r);const x=new p.i;s=i.xr.getControllerGrip(0),s.add(x.createControllerModel(s)),n.add(s),window.addEventListener("resize",y),document.body.appendChild(u.createButton(i,{optionalFeatures:["depth-sensing"]}))}function m(e){let t,n;switch(e.targetRayMode){case"tracked-pointer":return t=new c.u9r,t.setAttribute("position",new c.a$l([0,0,0,0,0,-1],3)),t.setAttribute("color",new c.a$l([.5,.5,.5,0,0,0],3)),n=new c.nls({vertexColors:!0,blending:c.WMw}),new c.x12(t,n);case"gaze":return t=new c.o8S(.02,.04,32).translate(0,0,-1),n=new c.vBJ({opacity:.5,transparent:!0}),new c.Kj0(t,n)}}function y(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)}function w(){i.setAnimationLoop(v)}function v(){const s=60*e.getDelta();if(!0===r.userData.isSelecting){const e=a.children[0];a.remove(e),e.position.copy(r.position),e.userData.velocity.x=.02*(Math.random()-.5)*s,e.userData.velocity.y=.02*(Math.random()-.5)*s,e.userData.velocity.z=(.01*Math.random()-.05)*s,e.userData.velocity.applyQuaternion(r.quaternion),a.add(e)}const d=o.intersectObjects(a.children,!1);d.length>0?l!=d[0].object&&(l&&l.material.emissive.setHex(l.currentHex),l=d[0].object,l.currentHex=l.material.emissive.getHex(),l.material.emissive.setHex(16711680)):(l&&l.material.emissive.setHex(l.currentHex),l=void 0);for(let e=0;e<a.children.length;e++){const t=a.children[e];t.userData.velocity.multiplyScalar(1-.001*s),t.position.add(t.userData.velocity),(t.position.x<-3||t.position.x>3)&&(t.position.x=c.MathUtils.clamp(t.position.x,-3,3),t.userData.velocity.x=-t.userData.velocity.x),(t.position.y<0||t.position.y>6)&&(t.position.y=c.MathUtils.clamp(t.position.y,0,6),t.userData.velocity.y=-t.userData.velocity.y),(t.position.z<-3||t.position.z>3)&&(t.position.z=c.MathUtils.clamp(t.position.z,-3,3),t.userData.velocity.z=-t.userData.velocity.z),t.rotation.x+=2*t.userData.velocity.x*s,t.rotation.y+=2*t.userData.velocity.y*s,t.rotation.z+=2*t.userData.velocity.z*s}i.render(n,t);const u=()=>{i.setAnimationLoop(null),window.removeEventListener("resize",y),window.removeEventListener("component-unm√∑ounted",u);const e=document.getElementById("XRButton");e&&document.body.removeChild(e)};window.addEventListener("component-unmounted",u)}h(),w()},unmounted(){window.dispatchEvent(new Event("component-unmounted"))}},m=n(89);const y=(0,m.Z)(h,[["render",l]]);var w=y}}]);
//# sourceMappingURL=three-webxr-examples.4dbcf05e.js.map