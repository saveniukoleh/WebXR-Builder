{"version":3,"file":"js/three-demo-2.db70079d.js","mappings":"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","sources":["webpack://webxr-builder/./src/views/ThreeDemoSphereView.vue","webpack://webxr-builder/./src/views/ThreeDemoSphereView.vue?73ae"],"sourcesContent":["<template>\n  <div class=\"three-demo-2\">\n    <h1>Three.js Sphere</h1>\n    <div class=\"renderer-wrapper\">\n      <Renderer ref=\"renderer\" pointer resize shadow @click=\"randomColors\">\n        <Camera :position=\"{ z: 2.5 }\" />\n        <Scene background=\"white\">\n          <AmbientLight color=\"#ffffff\" />\n          <SpotLight\n            color=\"#ffffff\"\n            :intensity=\"5\"\n            :position=\"{ x: 0, y: 3, z: 2 }\"\n            :angle=\"Math.PI / 8\"\n            :penumbra=\"0.1\"\n            cast-shadow\n            :shadow-map-size=\"{ width: 2048, height: 2048 }\"\n          />\n          <SpotLight\n            color=\"#ff0000\"\n            :intensity=\"5\"\n            :position=\"{ x: 0, y: -3, z: 2 }\"\n            :angle=\"Math.PI / 8\"\n            :penumbra=\"0.1\"\n            cast-shadow\n            :shadow-map-size=\"{ width: 2048, height: 2048 }\"\n          />\n          <CannonWorld\n            :gravity=\"{ x: 0, y: 0, z: 0 }\"\n            @before-step=\"onBeforeStep\"\n          >\n            <InstancedMesh\n              ref=\"imeshC\"\n              :count=\"COUNT\"\n              @created=\"initIMesh\"\n              cast-shadow\n              receive-shadow\n            >\n              <SphereGeometry\n                :radius=\"0.1\"\n                :width-segments=\"16\"\n                :height-segments=\"16\"\n              />\n              <PhongMaterial />\n            </InstancedMesh>\n            <Sphere\n              v-for=\"i in 3\"\n              :key=\"`sphere-${i}`\"\n              :radius=\"0.25\"\n              :position=\"{ x: i - 2 }\"\n              :width-segments=\"16\"\n              :height-segments=\"16\"\n              receive-shadow\n            >\n              <PhongMaterial />\n            </Sphere>\n          </CannonWorld>\n        </Scene>\n        <EffectComposer>\n          <RenderPass />\n          <UnrealBloomPass :strength=\"0.5\" :threshold=\"0.99\" />\n          <FXAAPass />\n        </EffectComposer>\n      </Renderer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Color, MathUtils, Object3D, Vector3 } from 'three'\nimport {\n  AmbientLight,\n  Camera,\n  EffectComposer,\n  FXAAPass,\n  InstancedMesh,\n  PhongMaterial,\n  Renderer,\n  RenderPass,\n  Scene,\n  Sphere,\n  SphereGeometry,\n  SpotLight,\n  UnrealBloomPass\n} from 'troisjs'\nimport CannonWorld from 'troisjs/src/components/physics/CannonWorld.js'\nimport niceColors from 'nice-color-palettes'\n\nconst { randFloat: rnd, randFloatSpread: rndFS } = MathUtils\n\nexport default {\n  components: {\n    AmbientLight,\n    Camera,\n    CannonWorld,\n    EffectComposer,\n    FXAAPass,\n    InstancedMesh,\n    PhongMaterial,\n    Renderer,\n    RenderPass,\n    Scene,\n    Sphere,\n    SphereGeometry,\n    SpotLight,\n    UnrealBloomPass\n  },\n  setup() {\n    return {\n      COUNT: 250\n    }\n  },\n  methods: {\n    onBeforeStep() {\n      const v = new Vector3()\n      const target = this.$refs.renderer.three.pointer.positionV3\n      this.imesh.userData.bodies.forEach((body) => {\n        v.copy(target).sub(body.position).normalize().multiplyScalar(0.5)\n        v.clampScalar(-0.5, 0.5)\n        body.force.copy(v)\n      })\n    },\n    initIMesh(imesh) {\n      this.imesh = imesh\n\n      const dummy = new Object3D()\n      const color = new Color()\n      const scales = new Array(this.COUNT)\n      const masses = new Array(this.COUNT)\n      const colors = new Array(this.COUNT)\n        .fill()\n        .map(() => niceColors[20][Math.floor(rnd(0, 5))])\n\n      for (let i = 0; i < this.COUNT; i++) {\n        dummy.position.set(rndFS(2), rndFS(2), rndFS(2))\n        const scale = rnd(0.2, 1)\n        scales[i] = scale\n        masses[i] = scale\n        dummy.scale.set(scale, scale, scale)\n        dummy.updateMatrix()\n        imesh.setMatrixAt(i, dummy.matrix)\n        imesh.setColorAt(i, color.set(colors[i]))\n      }\n      imesh.instanceMatrix.needsUpdate = true\n      imesh.userData.scales = scales\n      imesh.userData.masses = masses\n      imesh.userData.damping = 0.1\n    },\n    randomColors() {\n      const ci = Math.floor(rnd(0, 100))\n      const color = new Color()\n      const colors = new Array(this.COUNT)\n        .fill()\n        .map(() => niceColors[ci][Math.floor(rnd(0, 5))])\n      for (let i = 0; i < this.COUNT; i++) {\n        this.imesh.setColorAt(i, color.set(colors[i]))\n      }\n      this.imesh.instanceColor.needsUpdate = true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.three-demo-2 {\n  height: calc(100% - 168px);\n}\n\n.renderer-wrapper {\n  border: 5px #2c3e50 solid;\n  height: 100%;\n}\n</style>\n","import { render } from \"./ThreeDemoSphereView.vue?vue&type=template&id=5bd02f82\"\nimport script from \"./ThreeDemoSphereView.vue?vue&type=script&lang=js\"\nexport * from \"./ThreeDemoSphereView.vue?vue&type=script&lang=js\"\n\nimport \"./ThreeDemoSphereView.vue?vue&type=style&index=0&id=5bd02f82&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_Renderer","ref","pointer","resize","shadow","onClick","$options","randomColors","_component_Camera","position","z","_component_Scene","background","_component_AmbientLight","color","_component_SpotLight","intensity","x","y","angle","Math","PI","penumbra","width","height","_component_CannonWorld","gravity","onBeforeStep","_component_InstancedMesh","count","$setup","COUNT","onCreated","initIMesh","_component_SphereGeometry","radius","_component_PhongMaterial","_Fragment","_renderList","i","_component_Sphere","key","_component_EffectComposer","_component_RenderPass","_component_UnrealBloomPass","strength","threshold","_component_FXAAPass","randFloat","rnd","randFloatSpread","rndFS","MathUtils","components","AmbientLight","Camera","CannonWorld","EffectComposer","FXAAPass","InstancedMesh","PhongMaterial","Renderer","RenderPass","Scene","Sphere","SphereGeometry","SpotLight","UnrealBloomPass","setup","methods","v","Vector3","target","this","$refs","renderer","three","positionV3","imesh","userData","bodies","forEach","body","copy","sub","normalize","multiplyScalar","clampScalar","force","dummy","Object3D","Color","scales","Array","masses","colors","fill","map","niceColors","floor","set","scale","updateMatrix","setMatrixAt","matrix","setColorAt","instanceMatrix","needsUpdate","damping","ci","instanceColor","__exports__","render"],"sourceRoot":""}